<div class="space-y-6 p-8">

  <!-- Stats Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <div *ngFor="let stat of dynamicStats" class="card stat-card p-6">
        <div>
          <p class="stat-title">{{ stat.title }}</p>
          <p class="stat-value">{{ stat.value }}</p>
          <p class="stat-change">{{ stat.change }}</p>
        </div>

        <div class="stat-icon-wrap">
          <i-feather [name]="stat.icon" class="stat-icon" [ngClass]="stat.color"></i-feather>
        </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Recent Activity -->
    <div class="card">
      <div class="card-header flex items-center justify-between">
        <h3 class="card-title">Recent Activity</h3>
        <button class="btn btn-outline btn-sm">View All</button>
      </div>

      <div class="card-content">
        <div *ngFor="let activity of recentActivity" class="activity-row">
          <div class="activity-left">
            <div class="activity-icon-bg">
              <svg *ngIf="activity.type === 'application'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="activity-icon"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
              <svg *ngIf="activity.type === 'task'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="activity-icon"><path d="M22 11.08V12a10 10 0 1 1-5.93-8.96"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
              <svg *ngIf="activity.type === 'evaluation'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="activity-icon"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line><line x1="4" y1="20" x2="18" y2="20"></line></svg>
              <svg *ngIf="activity.type === 'unknown'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="activity-icon"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
            </div>
            <div class="activity-text">
              <p class="activity-message">{{ activity.message }} at {{ activity.time | date:'shortTime' }}</p>
            </div>
          </div>
          <p class="activity-time">{{ activity.time | timeAgo }}</p>
        </div>
      </div>
    </div>

    <!-- Upcoming Deadlines -->
    <div class="card">
      <div class="card-header flex items-center justify-between">
        <h3 class="card-title">Upcoming Deadlines</h3>
      </div>

      <div class="card-content space-y-4">
        <div *ngIf="upcomingDeadlines.length === 0" class="text-center py-10">
          <p class="text-gray-500">No upcoming deadlines.</p>
        </div>
        <div *ngFor="let deadline of upcomingDeadlines" class="deadline-row">
          <div class="flex items-start gap-3">
            <div class="priority-dot"
              [ngClass]="{
                'high': deadline.priority === 'High',
                'medium': deadline.priority === 'Medium',
                'low': deadline.priority === 'Low'
              }"></div>

            <div>
              <p class="deadline-task">{{ deadline.taskName }}</p>
              <p class="deadline-intern">{{ deadline.internName }}</p>
            </div>
          </div>

          <div class="text-right">
            <p class="deadline-due">{{ deadline.dueDate | date:'mediumDate' }}</p>
            <span class="badge deadline-badge"
              [ngClass]="{
                'badge-destructive': deadline.priority === 'High',
                'badge-secondary': deadline.priority !== 'High'
              }">
              {{ deadline.priority }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Quick Actions -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Quick Actions</h3>
    </div>

    <div class="card-content">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <button (click)="openAddInternModal()" class="btn quick-action primary-action h-auto p-6 flex flex-col items-center gap-2 border border-gray-300">
          <i-feather name="plus" class="w-6 h-6"></i-feather>
          <span>Add New Intern</span>
        </button>

        @if (showAddInternModal) {
          <app-add-intern (emailSubmitted)="handleEmailSubmission($event)" (cancelled)="closeAddInternModal()"></app-add-intern>
        }

        <button (click)="reviewPendingApplications()" class="btn btn-outline h-auto p-6 flex flex-col items-center gap-2">
          <i-feather name="file-text" class="w-6 h-6"></i-feather>
          <span>Review Pending Applications</span>
        </button>

        <button (click)="createEvaluation()" class="btn btn-outline h-auto p-6 flex flex-col items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
          </svg>
          <span>Create Evaluation</span>
        </button>
      </div>
    </div>
  </div>
</div>
