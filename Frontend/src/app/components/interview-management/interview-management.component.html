<div class="page-container">
    <div class="header-section">
        <div>
            <h1 class="page-title">Interview Management</h1>
            <p class="page-subtitle">Schedule and manage candidate interviews</p>
        </div>
        <button (click)="openScheduleModal()" class="primary-button">
            <span>+</span> Schedule Interview
        </button>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-content">
                <div class="icon-wrapper blue">
                    <span class="stat-icon">üìÖ</span>
                </div>
                <div>
                    <p class="stat-label">Scheduled</p>
                    <p class="stat-value">{{ upcomingInterviews.length }}</p>
                </div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-content">
                <div class="icon-wrapper green">
                    <span class="stat-icon">‚úÖ</span>
                </div>
                <div>
                    <p class="stat-label">Completed</p>
                    <p class="stat-value">{{ completedInterviews.length }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Upcoming Interviews -->
    <div class="interviews-section">
        <div class="section-header">
            <h2 class="section-title">Upcoming Interviews</h2>
        </div>
        <div class="section-body">
            <div *ngIf="upcomingInterviews.length === 0" class="empty-state">
                No upcoming interviews scheduled.
            </div>
            <div class="interviews-list">
                <div *ngFor="let interview of upcomingInterviews" class="interview-card">
                    <div class="card-main-info">
                        <div class="avatar-circle avatar-blue">
                            {{ interview.candidateName.charAt(0) }}
                        </div>
                        <div>
                            <h3 class="candidate-name">{{ interview.candidateName }}</h3>
                            <p class="candidate-position">{{ interview.position }}</p>
                            <div class="meta-info">
                                <span class="meta-item">üìÖ {{ interview.date | date }}</span>
                                <span class="meta-item">‚è∞ {{ interview.time }}</span>
                                <span class="meta-item">üìç {{ interview.type }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <span class="status-badge status-scheduled">{{
                            interview.status }}</span>
                        <button (click)="openDetailsModal(interview)" class="secondary-button">
                            Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Completed Interviews -->
    <div class="interviews-section">
        <div class="section-header">
            <h2 class="section-title">Past Interviews</h2>
        </div>
        <div class="section-body">
            <div *ngIf="completedInterviews.length === 0" class="empty-state">
                No past interviews found.
            </div>
            <div class="interviews-list">
                <div *ngFor="let interview of completedInterviews" class="interview-card">
                    <div class="card-main-info">
                        <div class="avatar-circle avatar-gray">
                            {{ interview.candidateName.charAt(0) }}
                        </div>
                        <div>
                            <h3 class="candidate-name">{{ interview.candidateName }}</h3>
                            <p class="candidate-position">{{ interview.position }}</p>
                            <div class="meta-info">
                                <span class="meta-item">üìÖ {{ interview.date | date }}</span>
                                <span class="meta-item">‚≠ê {{ interview.rating ? interview.rating + '/5' :
                                    'No Rating' }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <span [ngClass]="{
              'status-completed': interview.status === 'Completed',
              'status-cancelled': interview.status === 'Cancelled',
              'status-noshow': interview.status === 'NoShow'
            }" class="status-badge">{{ interview.status }}</span>
                        <button (click)="openDetailsModal(interview)" class="secondary-button">
                            Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Modal -->
    <div *ngIf="showScheduleModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Schedule Interview</h2>
                <button (click)="closeScheduleModal()" class="close-button">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label">Application ID (GUID)</label>
                        <input [(ngModel)]="newInterview.applicationId" class="form-input"
                            placeholder="Enter Application ID">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Position</label>
                        <input [(ngModel)]="newInterview.position" class="form-input" placeholder="Software Engineer">
                    </div>
                </div>
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label">Candidate Name</label>
                        <input [(ngModel)]="newInterview.candidateName" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Candidate Email</label>
                        <input [(ngModel)]="newInterview.candidateEmail" class="form-input">
                    </div>
                </div>
                <div class="form-grid-3">
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" [(ngModel)]="newInterview.date" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time</label>
                        <input type="time" [(ngModel)]="newInterview.time" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Duration (min)</label>
                        <input type="number" [(ngModel)]="newInterview.duration" class="form-input">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Type</label>
                    <select [(ngModel)]="newInterview.type" class="form-select">
                        <option value="Video">Video Call</option>
                        <option value="Phone">Phone Call</option>
                        <option value="InPerson">In Person</option>
                    </select>
                </div>
                <div *ngIf="newInterview.type === 'Video'" class="form-group">
                    <label class="form-label">Meeting Link</label>
                    <input [(ngModel)]="newInterview.meetingLink" class="form-input"
                        placeholder="https://meet.google.com/...">
                </div>
                <div *ngIf="newInterview.type === 'InPerson'" class="form-group">
                    <label class="form-label">Location</label>
                    <input [(ngModel)]="newInterview.location" class="form-input" placeholder="Conference Room A">
                </div>
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label">Interviewer Name</label>
                        <input [(ngModel)]="newInterview.interviewerName" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Interviewer Email</label>
                        <input [(ngModel)]="newInterview.interviewerEmail" class="form-input">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea [(ngModel)]="newInterview.notes" class="form-textarea" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button (click)="closeScheduleModal()" class="secondary-button">Cancel</button>
                <button (click)="scheduleInterview()" class="primary-button">Schedule</button>
            </div>
        </div>
    </div>

    <!-- Details Modal -->
    <div *ngIf="showDetailsModal && selectedInterview" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Interview Details</h2>
                <button (click)="closeDetailsModal()" class="close-button">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- Info Section -->
                <div class="details-info-box">
                    <div class="details-header">
                        <div>
                            <h3 class="font-bold text-lg">{{ selectedInterview.candidateName }}</h3>
                            <p class="text-muted">{{ selectedInterview.position }}</p>
                        </div>
                        <div class="details-meta">
                            <p class="font-medium">{{ selectedInterview.date | date }}</p>
                            <p class="text-muted">{{ selectedInterview.time }} ({{ selectedInterview.duration
                                }} min)</p>
                        </div>
                    </div>
                    <div class="details-row">
                        <span class="text-muted">üìß {{ selectedInterview.candidateEmail }}</span>
                        <span class="text-muted">üë§ Interviewer: {{ selectedInterview.interviewerName }}</span>
                    </div>
                    <div *ngIf="selectedInterview.meetingLink" class="text-sm">
                        <a [href]="selectedInterview.meetingLink" target="_blank" class="details-link">Join Meeting</a>
                    </div>
                </div>

                <!-- Actions -->
                <div class="card-actions">
                    <button *ngIf="selectedInterview.status === 'Scheduled'"
                        (click)="updateInterviewStatus('Completed')" class="status-badge status-completed">Mark
                        Completed</button>
                    <button *ngIf="selectedInterview.status === 'Scheduled'"
                        (click)="updateInterviewStatus('Cancelled')"
                        class="status-badge status-cancelled">Cancel</button>
                    <button *ngIf="selectedInterview.status === 'Scheduled'" (click)="updateInterviewStatus('NoShow')"
                        class="status-badge status-noshow">No Show</button>
                </div>

                <!-- Feedback Section -->
                <div class="interviews-list">
                    <h3 class="section-title border-b pb-2">Feedback & Rating</h3>
                    <div class="form-group">
                        <label class="form-label">Rating</label>
                        <div class="rating-stars">
                            <button *ngFor="let star of [1,2,3,4,5]" (click)="setRating(star)" class="star-btn"
                                [class.active]="star <= feedbackData.rating">‚òÖ</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Feedback Notes</label>
                        <textarea [(ngModel)]="feedbackData.feedback" class="form-textarea" rows="4"
                            placeholder="Enter detailed feedback..."></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button (click)="closeDetailsModal()" class="secondary-button">Close</button>
                <button (click)="saveFeedback()" class="primary-button">Save Feedback</button>
            </div>
        </div>
    </div>
</div>